<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      throwConfigExceptions="true"
      autoReload="true">

	<!-- NOTE: If you change this file in any way then you must CLEAN the build -->

	<variable name="hostName" value="Local"/>
	<variable name="applicationName" value="SAML2 dev"/>
	<variable name="serviceName" value="Web"/>

	<targets async="true">


		<!-- LOCAL FILE -->

		<target name="log2file" xsi:type="File" fileName="c:\${applicationName}\${hostName}\Logs\${serviceName}.log" />

		<target name="log2XmlFile"
				xsi:type="File"
				fileName="c:\${applicationName}\${hostName}\Logs\${serviceName}.xml"
				archiveFileName="c:\${applicationName}\${hostName}\Logs\archives\${serviceName}.{#}.xml"
				archiveEvery="Day"
				archiveNumbering="Rolling"
				maxArchiveFiles="7"
				concurrentWrites="true"
				keepFileOpen="false"
    >
			<layout xsi:type="Log4JXmlEventLayout" includeAllProperties="true">
			</layout>
		</target>

		<!-- CHAINSAW -->

		<!-- LOCALHOST - for Developers -->
		<target xsi:type="Chainsaw"
				name="chainsawLocalhost"
				newLine="false"
				onOverflow="Error"
				maxMessageSize="65000"
				address="udp4://127.0.0.1:7071"
				keepConnection="true"
				includeMdc="false"
				includeSourceInfo="true">
			<parameter layout="${hostName}" name="hostname"/>
			<parameter layout="${applicationName}" name="application"/>
		</target>


	</targets>

	<rules>
		<!-- filter out unwanted logs -->
		<logger name="Microsoft.AspNetCore.*" minLevel="Trace" maxLevel="Info" final="true" />


		<!--<logger name="*" minlevel="Debug" writeTo="log2file" />-->
		<!--<logger name="*" minlevel="Debug" writeTo="log2XmlFile" />-->


		<logger name="*" minlevel="Debug" writeTo="chainsawLocalhost" />
	</rules>

</nlog>